way to resolve conﬂicting requests. ● Leader failure detection. Optimal timeout is tricky. 17 Replication Lag refers to the time it takes for writes on the leader to be reﬂected on all of the followers. ●Synchronous replication: Replication lag causes writes to be slower and the system to be more brittle as num followers increases. ●Asynchronous replication: We maintain availability but at the cost of delayed or eventual consistency. This delay is called the inconsistency window. Replication Lag 18 Read-after-Write Consistency Scenario - you’re adding a comment to a Reddit post… after you click Submit and are back at the main post, your comment should show up for you. - Less important for other users to see your comment as immediately. 19 Implementing Read-After-Write Consistency Method 1: Modiﬁable data (from the client’s perspective) is always read from the leader. 20 Implementing Read-After-Write Consistency Method 2: Dynamically switch to reading from leader for “recently updated” data. - For example, have a policy that all requests within one minute of last update come from leader. 21 But… This Can Create Its Own Challenges 22 We created followers so they would be proximal to users. BUT… now we have to route requests to