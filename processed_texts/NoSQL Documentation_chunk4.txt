{ "location" : "Boston" }} Sub Queries The following sub-query retrieves the department ID of each department in New York: { "object": "department", "q": { "city" : "New York" }, "fields" : ["id"]} latest Using this subquery, we can now test a new field - dept_id - with respect to the results of the subqeury. We simply use the $in operator, and the query, as follows: { "dept_id": { "$in": { { "object": "department", "q": { "city" : "New York" }, "fields" : ["id"] } } } } This technique relies upon retrieving a single field from the sub-query. Using more than one field would prove more complex. We can now use this sub-query as a part of a larger query retrieving all employees employed in departments that are located in New York. In this example, the deptId field is a reference field referring the employees table to the department table: { "object": "employees", "q" : { "deptId" : { "$in": { "object": "department", "q": { "city" : "New York" }, "fields" : ["id"] } } } } If we wanted to look at a more complex query, we could modify this a bit. Let's say we wanted to retrieve